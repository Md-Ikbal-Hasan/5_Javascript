<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch API</title>
</head>

<body>
    <h1>Fetch API</h1>

    <script>
        /* fetch("https://jsonplaceholder.typicode.com/posts/1", {
             method: "PUT",
             headers: {
                 'Content-type': 'application/json; charset=UTF-8',
             },
             body: JSON.stringify({
                 id: 1,
                 title: 'fooma',
                 body: 'barma',
                 userId: 1,
             }),
         })
             .then((res) => {
                 if (!res) {
                     const message = `Error: ${res.status}`;
                     throw new Error(message);
                 }
                 return res.json();
             })
 
             .then((res) => console.log(res))
             .catch((err) => console.log(err)); */




        const makeRequest = async (url, config) => {
            const res = await fetch(url, config);
            if (!res.ok) {
                const message = `Error : ${err.status}`;
                throw new Error(message);
            }
            const data = await res.json();
            return data;

        }


        const getData = () => {
            makeRequest("https://jsonplaceholder.typicode.com/posts/1")
                .then((res) => console.log(res))
                .catch((err) => console.log(err))

        };
        //getData(); 




        const sendData = () => {
            makeRequest("https://jsonplaceholder.typicode.com/posts",
                {
                    method: 'POST',
                    body: JSON.stringify({
                        title: 'sending data..',
                        body: 'bar',
                        userId: 1,
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                    }
                })
                .then((res) => console.log(res))
                .catch((err) => console.log(err))
        };

        //sendData(); 


        const updateData = () => {
            makeRequest("https://jsonplaceholder.typicode.com/posts/1",
                {
                    method: 'PUT',
                    body: JSON.stringify({
                        id: 1,
                        title: 'fooma',
                        body: 'barma',
                        userId: 1,
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                    }
                })
                .then((res) => console.log(res))
                .catch((err) => console.log(err))
        };

        //updateData();


        const updateSingleData = () => {
            makeRequest("https://jsonplaceholder.typicode.com/posts/1",
                {
                    method: 'PATCH',
                    body: JSON.stringify({

                        title: 'Title changed ',

                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                    }
                })
                .then((res) => console.log(res))
                .catch((err) => console.log(err))
        };

        updateSingleData();




        const deleteData = () => {
            makeRequest("https://jsonplaceholder.typicode.com/posts/2",
                {
                    method: 'DELETE',

                })
                .then((res) => console.log(res))
                .catch((err) => console.log(err))
        };

        //deleteData();






    </script>

</body>

</html>